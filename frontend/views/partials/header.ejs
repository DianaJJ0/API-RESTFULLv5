<!--
  HEADER PRINCIPAL DEL SITIO
  Muestra el menú, enlaces y estado de usuario (logueado o no).
-->
<header class="site-header">
  <div class="site-header__container">
    <!-- Logo principal -->
    <a href="/" class="site-header__logo">TechStore</a>
    
    <!-- Menú de navegación -->
    <nav class="site-header__nav">
      <a href="/" class="site-header__link">Inicio</a>
      <a href="/catalogo" class="site-header__link">Productos</a>
      <a href="#" class="site-header__link">Contacto</a>
    </nav>
    
    <!-- Sección autenticación (usuario logueado o no) -->
    <div class="site-header__auth">
      <% if (usuario && usuario.nombreCompleto) { %>
        <!-- Usuario autenticado: avatar de iniciales y menú desplegable -->
        <div class="user-menu">
          <div class="avatar-circle" id="avatarBtn" title="<%= usuario.nombreCompleto %>">
            <% 
              // Obtiene iniciales del primer y segundo nombre (o primer apellido si solo hay uno)
              const nombreParts = usuario.nombreCompleto.trim().split(' ');
              const iniciales = nombreParts[0].charAt(0).toUpperCase() + (nombreParts[1] ? nombreParts[1].charAt(0).toUpperCase() : '');
            %>
            <%= iniciales %>
          </div>
          <span class="dropdown-arrow" id="dropdownArrow">&#9662;</span>
          <div class="dropdown-menu" id="dropdownMenu">
            <a href="/perfil"><i class="fa fa-user"></i> Mi Perfil</a>
            <a href="/auth/logout"><i class="fa fa-sign-out"></i> Cerrar Sesión</a>
          </div>
        </div>
      <% } else { %>
        <!-- Usuario no autenticado: muestra botones de login y registro -->
        <a href="/login" class="btn btn-outline">Iniciar sesión</a>
        <a href="/register" class="btn btn-primary">Registrarse</a>
      <% } %>
    </div>
  </div>
</header>

<!-- Enlaza el script para el menú desplegable del usuario -->
<script src="/js/headerMenu.js"></script>